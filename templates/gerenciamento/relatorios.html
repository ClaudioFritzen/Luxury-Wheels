{% extends "bases/base.html" %}

{% load static %}

{% block head %}
<!-- Qualquer conteúdo adicional de head -->
    <link rel="stylesheet" href="{% static 'usuarios/css/css.css' %}">
{% endblock %}

{% block conteudo %}

    <div class="container">
        <h2>Relatórios de Aluguéis e Receitas</h2>
        
        <p><strong>Total de Aluguéis:</strong> {{ total_alugueis }}</p>
        <p><strong>Receita Total:</strong> €{{ receita_total|floatformat:2 }}</p>
        
        <h3>Carros Mais Alugados</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Marca</th>
                    <th>Modelo</th>
                    <th>Total de Aluguéis</th>
                </tr>
            </thead>
            <tbody>
                {% for carro in carros_populares %}
                <tr>
                    <td>{{ carro.carro__marca }}</td>
                    <td>{{ carro.carro__modelo }}</td>
                    <td>{{ carro.total_alugueis }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h3>Receita por Categoria</h3>
        <ul>
            {% for categoria in receita_por_categoria %}
            <li>{{ categoria.categoria }}: €{{ categoria.receita_total|floatformat:2 }}</li>
            {% endfor %}
        </ul>

        <p><strong>Aluguéis Ativos:</strong> {{ alugueis_ativos }}</p>
        <h3>Status dos Veículos</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Marca</th>
                    <th>Modelo</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for veiculo in veiculos_status %}
                <tr>
                    <td>{{ veiculo.carro__marca }}</td>
                    <td>{{ veiculo.carro__modelo }}</td>
                    <td>{{ veiculo.status }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>




        <h3>Status dos Pagamentos</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Status</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Concluídos</td>
                    <td>{{ pagamentos_concluidos }}</td>
                </tr>
                <tr>
                    <td>Pendentes</td>
                    <td>{{ pagamentos_pendentes }}</td>
                </tr>
                <tr>
                    <td>Cancelados</td>
                    <td>{{ pagamentos_cancelados }}</td>
                </tr>
                <tr>
                    <td>Reembolsados</td>
                    <td>{{ pagamentos_reembolsados }}</td>
                </tr>
            </tbody>
        </table>
        <h3>Distribuição de Pagamentos</h3>
        <img src="{% static 'gerenciamento/images/grafico_pizza.png' %}" alt="Gráfico de Pagamentos">



    </div>
 
{% endblock %}


