{% extends "bases/base.html" %}

{% load static %}

{% block head %}
    
    <link href="{% static 'usuarios/css/css.css' %}" rel="stylesheet">
    <link href="{% static 'carros/css/carro.css' %}" rel="stylesheet">
{% endblock head %}

{% block conteudo %}
    <br>
    <br>
    <div class="container">
        <h3 class="font-destaque">Carros</h3>
        <h2> Selecione seu veiculo</h2>

        <h1>Filtros de Busca</h1>
        <form action="/buscar" method="GET">
            <label for="transmissao">Transmissão:</label>
            <select id="transmissao" name="transmissao">
                <option value="manual">Manual</option>
                <option value="automatico">Automático</option>
                <option value="ambos">Ambos</option>
            </select>
            <br><br>

            <label for="combustivel">Combustível:</label>
            <select id="combustivel" name="combustivel">
                <option value="gasolina">Gasolina</option>
                <option value="diesel">Diesel</option>
                <option value="eletrico">Elétrico</option>
            </select>
            <br><br>

            <label for="cor">Cor:</label>
            <select id="cor" name="cor">
                <option value="branco">Branco</option>
                <option value="preto">Preto</option>
                <option value="azul">Azul</option>
            </select>
            <br><br>

            <button type="submit">Filtrar</button>
        </form>
        {% for carro in carros %}
            <div class="carro-card">
                {% if carro.imagem %}
                    <img class="carro-imagem" src="{{ carro.imagem.url }}" alt="Imagem de {{ carro.marca }} {{ carro.modelo }}">
                {% else %}
                    <img class="carro-imagem" src="/media/default-car.jpg" alt="Imagem padrão">
                {% endif %}
                
                <div class="carro-info">
                    <h2>{{ carro.marca }} {{ carro.modelo }}</h2>
                    <p><strong>Ano:</strong> {{ carro.ano }}</p>
                    <p><strong>Preço da diária:</strong> R$ {{ carro.preco_diaria }}</p>

                    <!-- Botão de Alugar -->
                    {% if carro.disponibilidade %}
                        <form method="POST" action="{% url 'alugar_carro' carro.id %}">
                            {% csrf_token %}
                            <button type="submit" class="botao-alugar">Alugar</button>
                        </form>
                    {% else %}
                        <button class="botao-alugar" disabled>Indisponível</button>
                    {% endif %}
                </div>

                <!-- Status do carro -->
                {% if carro.disponibilidade %}
                    <span class="status disponivel">Disponível</span>
                {% else %}
                    <span class="status indisponivel">Indisponível</span>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock conteudo %}
